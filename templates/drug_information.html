<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        body {
            background-color: #ffffff;
            max-width: 1920px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 21px 430px;
            background-color: white;
            max-width: 1920px;
            margin: 0 auto;
        }

        .logo {
            color: #0052CC;
            width: 138px;
            height: 69px;
            font-weight: bold;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
        }

        .nav-menu a {
            text-decoration: none;
            color: #333;
            font-size: 18px;
            font-weight: 500;
            padding: 0 30px;
            position: relative;
            text-align: center;
        }

        .nav-menu a::after {
            content: "";
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 100px;
            height: 3px;
            background-color: #2a60ff;
            transition: transform 0.3s ease;
        }

        .nav-menu a:hover::after {
            transform: translateX(-50%) scaleX(1);
        }

        .drug-banner {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #ffffff;
            padding: 40px 0;
        }

        .drug-banner img {
            width: 1920px;
            height: 268px;
            object-fit: cover;
        }

        .white-box {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #ffffff;
            padding: 40px 0;
        }
        .white-box img {
            width: 1040px;
            height: 768px;
            object-fit: cover;
        }
        

        .blue-bar {
            background: #2a60ff;
            border-radius: 0px 180.5px 180.5px 0px;
            height: 4px;
            width: 571px;
            margin-bottom: 20px;
        }
        .blue-bar2 {
            background: #2a60ff;
            height: 1px;
            position: relative;
        }
        .drug-intro {
            color: #000000;
            text-align: center;
            font-family: "Pretendard-Bold", sans-serif;
            font-size: 30px;
            line-height: 50px;
            letter-spacing: 0.04em;
            font-weight: 700;
            position: relative;
        }

        .gray-bar {
            background: #efefef;
            height: 1px;
            position: relative;
        }
        .search-section{
            max-width: 1040px;
            margin: 0 auto;
        }
        .search-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .search-text {
            color: #6c6c6c;
            text-align: left;
            font-family: "Pretendard-Light", sans-serif;
            font-size: 16px;
            font-weight: 300;
            position: relative;
        }
        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 20px 0;
        }
        .group-search,
        .group-search * {
            box-sizing: border-box;
        }

        .group-search {
            width: 1040px;
            height: 41px; 
            position: relative;
        }

        .rectangle-910 {
            background: #ffffff;
            border-radius: 20.5px;
            border-style: solid;
            border-color: #b7b7b7;
            border-width: 0.7px;
            width: 100%; 
            height: 100%; 
            position: absolute;
            left: 0;
            top: 0;
        }

        .search-input {
            width: calc(100% - 60px); 
            height: 100%;
            position: absolute;
            left: 20px;
            border: none;
            background: none;
            outline: none;
            font-family: "Pretendard-Light", sans-serif;
            font-size: 18px;
            color: #000;
            padding: 0 15px;
        }
        .search-input::placeholder {
            color: #8c8c8c;
            font-family: "Pretendard-Light", sans-serif;
            font-size: 18px;
            font-weight: 300;
        }

        .search-button {
            background: none;
            border: none;
            padding: 0;
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
        }

        .search-button img {
            width: 21px;
            height: 21px;
        }

        .group-988,
        .group-988 * {
            box-sizing: border-box;
        }

        .group-988 {
            position: relative;
            width: 1040px;
            margin: 40px auto;
            height: 600px;
        }

        .image {
            border-radius: 5px;
            width: 1040px;
            height: 800px;
            position: absolute;
            left: 50%;
            translate: -50%;
            top: 0px;
            box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.1);
            object-fit: cover;
        }

        .div {
            color: #2a60ff;
            text-align: left;
            font-family: "Pretendard-SemiBold", sans-serif;
            font-size: 26px;
            font-weight: 600;
            position: absolute;
            left: 40px;
            top: 28.48px;
            width: 141px;
            height: 36.79px;
        }

        .div2 {
            color: #000000;
            text-align: left;
            font-family: "Pretendard-Light", sans-serif;
            font-size: 20px;
            font-weight: bold;
            position: absolute;
            left: 40px;
            top: 87.81px;
            width: 900px;
            height: 28.48px;
        }

        .rectangle-922 {
            background: #d9d9d9;
            width: 1px;
            height: 33.23px;
            position: absolute;
            left: 196px;
            top: 32.04px;
        }

        .result-content {
            position: absolute;
            top: 140px;
            left: 40px;
            right: 40px;
            padding: 20px;
            color: #000000;
            font-family: "Pretendard-Light", sans-serif;
            font-size: 18px;
        }

        .result-content p {
            margin-bottom: 15px;
        }

        .result-content strong {
            font-family: "Pretendard-Medium", sans-serif;
            color: #2a60ff;
        }
        .footer {
            background: #f6f6f6;
            padding: 20px 120px;
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #666;
            font-size: 14px;
            position: relative;
        }

        .footer-logo {
            flex-shrink: 0;
        }

        .footer-info {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            text-align: left;
            line-height: 1.5;
        }

        
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <a href="/">
                <img src="static/logo.png" alt="AI 헬스케어 로고" style="height: 69px;">
            </a>
        </div>
        <nav class="nav-menu">
            <a href="/introduction">AIHC소개</a>
            <a href="/location_selection">병원 찾기</a>
            <a href="/drug_information">의약품 정보</a>
        </nav>
    </header>
    <div class="gray-bar"></div>
    <div class="drug-banner">
        <img src="static/drug_banner.png" alt="intro"/>
    </div>
    <div class="drug-intro">내가 먹는 약 얼마나 알고 있나요?</div>
    <div style="height: 40px;"></div>
    <div class="blue-bar2"></div>
    <div style="height: 40px;"></div>

    <section class="search-section">
        <h2 class="search-title">약을 검색해보세요</h2>
            <div class="search-text">
                제품명, 효능, 사용법, 주의사항, 부작용, 보관법에 대한 정보를 제공합니다.
            </div>
            <div style="height: 20px;"></div>
        <div class="blue-bar"></div>
    </section>

    <div class="search-container">
        <form id="drug-form">
            <div class="group-search">
                <div class="rectangle-910"></div>
                <input type="text" 
                       id="drugName" 
                       name="drugName" 
                       class="search-input" 
                       placeholder="정확한 제품명을 입력해주세요." 
                       required />
                <button type="submit" class="search-button">
                    <img src="static/search_button.png" alt="검색" />
                </button>
            </div>
        </form>
    </div>
    
    <div class="results-container">
        <div id="drug-result" class="group-988" style="display: none;">
            <img class="image" src="static/result-box.png" />
            <div class="div">검색 결과</div>
            <div class="rectangle-922"></div>
            <div class="div2"></div>
            <div class="result-content">
                <!-- 검색 결과 내용이 여기에 들어갑니다 -->
            </div>
        </div>
    </div>

    <div class="white-box">
        <img src="static/white_box.png" alt="intro"/>
    </div>
    
    <footer class="footer">
        <div class="footer-logo">
            <a href="/">
                <img src="static/logo.png" alt="AI 헬스케어 로고" style="height: 69px;">
            </a>
        </div>
        <div class="footer-info">
            <p>Projecter : 여성원</p>
            <p>Project_name : AI 헬스케어 &emsp; &emsp; E-mail : aqwo6333@naver.com &emsp; &emsp; PH : 010-3807-7762 &emsp; &emsp; By.2024</p>
        </div>
    </footer>

    <script>
    // 약 검색 폼의 제출 이벤트 리스너 등록
    document.getElementById("drug-form").addEventListener("submit", function(event) {
        event.preventDefault(); // 폼 기본 동작(페이지 리로드)을 방지

        // 사용자 입력값을 가져오고, 공백 제거
        const drugName = document.getElementById("drugName").value.trim();
        if (!drugName) return; // 약 이름이 입력되지 않았다면 함수 종료

        // 검색 결과를 표시할 div 요소 가져오기
        const resultDiv = document.getElementById("drug-result");
        resultDiv.style.display = "block"; // 결과 div를 화면에 표시

        // 검색 중인 상태를 사용자에게 보여줌
        resultDiv.innerHTML = `
            <img class="image" src="static/result-box.png" /> <!-- 결과 섹션 배경 이미지 -->
            <div class="div">검색 결과</div> <!-- 결과 섹션 제목 -->
            <div class="rectangle-922"></div> <!-- 시각적 장식 요소 -->
            <div class="div2">검색 중...</div> <!-- 상태 메시지 -->
            <div class="result-content">
                <p>검색 중입니다...</p> <!-- 상세 상태 설명 -->
            </div>
        `;

        // 약 검색 API 호출
        fetch("/search_drug", {
            method: "POST", // HTTP POST 요청
            headers: {
                "Content-Type": "application/json" // 요청 데이터 형식 JSON
            },
            body: JSON.stringify({ drugName: drugName }) // 요청 데이터에 약 이름 포함
        })
        .then(response => response.json()) // 서버 응답을 JSON으로 파싱
        .then(data => {
            // 서버 응답에 오류 메시지가 포함된 경우
            if (data.error) {
                resultDiv.innerHTML = `
                    <img class="image" src="static/result-box.png" /> <!-- 결과 섹션 배경 이미지 -->
                    <div class="div">검색 결과</div> <!-- 결과 섹션 제목 -->
                    <div class="rectangle-922"></div> <!-- 시각적 장식 요소 -->
                    <div class="div2">오류</div> <!-- 오류 상태 메시지 -->
                    <div class="result-content">
                        <p class="text-danger">${data.error}</p> <!-- 서버에서 제공한 오류 메시지 표시 -->
                    </div>
                `;
            } else {
                // 검색 결과를 정상적으로 받아온 경우
                resultDiv.innerHTML = `
                    <img class="image" src="static/result-box.png" /> <!-- 결과 섹션 배경 이미지 -->
                    <div class="div">검색 결과</div> <!-- 결과 섹션 제목 -->
                    <div class="rectangle-922"></div> <!-- 시각적 장식 요소 -->
                    <div class="div2">${data.itemName}</div> <!-- 검색된 약 이름 표시 -->
                    <div class="result-content">
                        <p><strong>효능:</strong> ${data.efcyQesitm}</p> <!-- 약의 효능 -->
                        <p><strong>사용법:</strong> ${data.useMethodQesitm}</p> <!-- 약의 사용 방법 -->
                        <p><strong>주의사항:</strong> ${data.atpnQesitm}</p> <!-- 약 복용 시 주의사항 -->
                        <p><strong>부작용:</strong> ${data.seQesitm}</p> <!-- 약 복용 시 예상 부작용 -->
                        <p><strong>보관법:</strong> ${data.depositMethodQesitm}</p> <!-- 약의 보관 방법 -->
                    </div>
                `;
            }
        })
        .catch(error => {
            // 네트워크 오류 또는 서버 오류 발생 시
            console.error("Error:", error); // 콘솔에 오류 출력
            resultDiv.innerHTML = `
                <img class="image" src="static/result-box.png" /> <!-- 결과 섹션 배경 이미지 -->
                <div class="div">검색 결과</div> <!-- 결과 섹션 제목 -->
                <div class="rectangle-922"></div> <!-- 시각적 장식 요소 -->
                <div class="div2">오류 발생</div> <!-- 오류 상태 메시지 -->
                <div class="result-content">
                    <p class="text-danger">오류가 발생했습니다. 다시 시도해 주세요.</p> <!-- 오류 메시지 표시 -->
                </div>
            `;
        });
    });
    </script>
</body>
</html>